---
title: WebAPP 框架方案讨论
date: 2018-03-01 23:54:43
tags:
- H5
- WebApp
categories:
- WebApp

---


![](http://jquerymobile.com/resources/devices.png)
---

## 框架需求

- H5应用开发响应快速开发
- 多客户的定制化
- 不同项目呈现不同的功能模块
- 移动端原生功能的支持
- 升级迭代的便利性

<!-- more -->

## 目前WebAPP方案对比

- React Native
- Ionic
- H5+
- 微信小程序

## 框架方案思路

![webapp h5+](http://oxwfu3w0v.bkt.clouddn.com/2018/02/28/h5_webapp.png)

- APP： 原生APP，MA容器功能和管理功能。
- MA: 微应用，H5+实现的微小应用。尽量功能单一，体量小。
- WebView: 经过封装原生WebView,封装后经过桥接插件支持H5+
- plug: 插件，桥接JS和原生API
- S： 服务端微服务
- ACS: MA注册服务，记录列表-服务端包含的微应用
- UCS：用户配置服务，记录列表-用户需要的微应用

### 思路简介

1. 移动端APP不包括任何业务逻辑，业务功能只按模块分布于各个微应用MA中。
2. MA通过H5+实现单一/简单的功能，被打包成资源包，存储在服务器`微应用仓库`中。
3. ACS/UCS 记录/管理微应用仓库和用户微应用需求
4. APP通过ACS/UCS， `发现`/`加载`/`升级` 微应用
5. APP通过WebView启动微应用，运行业务功能

## 主要涉及的功能

- WebView加载本地MA资源
- H5+ 插件开发调用原生API
- MA资源管理
    - MA资源配置获取
    - MA资源网络加载
    - MA资源本地管理
- 移动端权限获取
- 壳APP的其它功能

## 需要考虑的问题

- 配置信息规范
- 移动端权限管理
- 插件开发
- 微应用之间需要通信吗？如何通信？
- 性能要求
    - H5的流畅度
    - MA资源包的加载速度
- H5在各个Android系统中的适配问题

> 后期，每添加一个插件都需要APP的打包上架，建议减少上架次数

## 可能存在问题/风险

- iOS上架风险，H5 APP上架的不确定性
- 适配问题的各种坑（WebApp的坑）
- H5+ Engine的封闭性，没有开源，太依赖5+SDK

## 后续任务

- 方案的可行性
- 研究插件开发的实现方式
